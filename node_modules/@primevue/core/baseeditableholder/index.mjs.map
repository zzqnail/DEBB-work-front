{"version":3,"file":"index.mjs","sources":["../../src/baseeditableholder/BaseEditableHolder.vue"],"sourcesContent":["<script>\nimport { isNotEmpty } from '@primeuix/utils';\nimport BaseComponent from '@primevue/core/basecomponent';\n\nexport default {\n    name: 'BaseEditableHolder',\n    extends: BaseComponent,\n    emits: ['update:modelValue', 'value-change'],\n    props: {\n        modelValue: {\n            type: null,\n            default: undefined\n        },\n        defaultValue: {\n            type: null,\n            default: undefined\n        },\n        name: {\n            type: String,\n            default: undefined\n        },\n        invalid: {\n            type: Boolean,\n            default: undefined\n        },\n        disabled: {\n            type: Boolean,\n            default: false\n        },\n        formControl: {\n            type: Object,\n            default: undefined\n        }\n    },\n    inject: {\n        $parentInstance: {\n            default: undefined\n        },\n        $pcForm: {\n            default: undefined\n        },\n        $pcFormField: {\n            default: undefined\n        }\n    },\n    data() {\n        return {\n            d_value: this.defaultValue !== undefined ? this.defaultValue : this.modelValue\n        };\n    },\n    watch: {\n        modelValue(newValue) {\n            this.d_value = newValue;\n        },\n        defaultValue(newValue) {\n            this.d_value = newValue;\n        },\n        $formName: {\n            immediate: true,\n            handler(newValue) {\n                this.formField = this.$pcForm?.register?.(newValue, this.$formControl) || {};\n            }\n        },\n        $formControl: {\n            immediate: true,\n            handler(newValue) {\n                this.formField = this.$pcForm?.register?.(this.$formName, newValue) || {};\n            }\n        },\n        $formDefaultValue: {\n            immediate: true,\n            handler(newValue) {\n                this.d_value !== newValue && (this.d_value = newValue);\n            }\n        },\n        $formValue: {\n            immediate: false,\n            handler(newValue) {\n                if (this.$pcForm?.getFieldState(this.$formName) && newValue !== this.d_value) {\n                    this.d_value = newValue;\n                }\n            }\n        }\n    },\n    formField: {},\n    methods: {\n        writeValue(value, event) {\n            if (this.controlled) {\n                this.d_value = value;\n                this.$emit('update:modelValue', value);\n            }\n\n            this.$emit('value-change', value);\n\n            this.formField.onChange?.({ originalEvent: event, value });\n        },\n        // @todo move to @primeuix/utils\n        findNonEmpty(...values) {\n            return values.find(isNotEmpty);\n        }\n    },\n    computed: {\n        $filled() {\n            return isNotEmpty(this.d_value);\n        },\n        $invalid() {\n            return !this.$formNovalidate && this.findNonEmpty(this.invalid, this.$pcFormField?.$field?.invalid, this.$pcForm?.getFieldState(this.$formName)?.invalid);\n        },\n        $formName() {\n            return !this.$formNovalidate ? this.name || this.$formControl?.name : undefined;\n        },\n        $formControl() {\n            return this.formControl || this.$pcFormField?.formControl;\n        },\n        $formNovalidate() {\n            return this.$formControl?.novalidate;\n        },\n        $formDefaultValue() {\n            return this.findNonEmpty(this.d_value, this.$pcFormField?.initialValue, this.$pcForm?.initialValues?.[this.$formName]);\n        },\n        $formValue() {\n            return this.findNonEmpty(this.$pcFormField?.$field?.value, this.$pcForm?.getFieldState(this.$formName)?.value);\n        },\n        controlled() {\n            return this.$inProps.hasOwnProperty('modelValue') || (!this.$inProps.hasOwnProperty('modelValue') && !this.$inProps.hasOwnProperty('defaultValue'));\n        },\n        // @deprecated use $filled instead\n        filled() {\n            return this.$filled;\n        }\n    }\n};\n</script>\n"],"names":["name","BaseComponent","emits","props","modelValue","type","undefined","defaultValue","String","invalid","Boolean","disabled","formControl","Object","inject","$parentInstance","$pcForm","$pcFormField","data","d_value","watch","newValue","$formName","immediate","handler","_this$$pcForm","_this$$pcForm$registe","formField","register","call","$formControl","_this$$pcForm2","_this$$pcForm2$regist","$formDefaultValue","$formValue","_this$$pcForm3","getFieldState","methods","writeValue","value","event","_this$formField$onCha","_this$formField","controlled","$emit","onChange","originalEvent","findNonEmpty","_len","arguments","length","values","Array","_key","find","isNotEmpty","computed","$filled","$invalid","_this$$pcFormField","_this$$pcForm4","$formNovalidate","$field","_this$$formControl","_this$$pcFormField2","_this$$formControl2","novalidate","_this$$pcFormField3","_this$$pcForm5","initialValue","initialValues","_this$$pcFormField4","_this$$pcForm6","$inProps","hasOwnProperty","filled"],"mappings":"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"}